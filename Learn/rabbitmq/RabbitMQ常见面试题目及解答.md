以下是 RabbitMQ 的常见面试题目及简要解答，涵盖基础到进阶知识点，帮助系统化复习：

---

### **一、基础概念**
1. **RabbitMQ 是什么？**  
   基于 AMQP 协议的开源消息代理，用于异步通信、应用解耦、流量削峰等场景。

2. **AMQP 协议的核心组件是什么？**  
   - **生产者（Producer）**：发送消息。  
   - **消费者（Consumer）**：接收消息。  
   - **交换器（Exchange）**：路由消息到队列。  
   - **队列（Queue）**：存储消息。  
   - **绑定（Binding）**：定义交换器和队列的规则。

3. **Exchange 的四种类型及区别？**  
   - **Direct**：精确匹配 Routing Key。  
   - **Topic**：通配符匹配 Routing Key（如 `*.error`）。  
   - **Fanout**：广播到所有绑定队列。  
   - **Headers**：通过消息头键值对匹配（不常用）。

---

### **二、消息可靠性**
4. **如何保证消息不丢失？**  
   - **生产者确认（Publisher Confirm）**：确保消息到达 Broker。  
   - **持久化**：队列、消息、交换器均设置为持久化（`durable=true`）。  
   - **消费者手动确认（Manual Ack）**：处理完消息后发送 Ack，避免自动删除。

5. **如何处理消息重复消费？**  
   - **业务层幂等性**：唯一 ID 去重（如数据库唯一索引）。  
   - **消息去重表**：记录已处理的消息 ID。

6. **死信队列（DLQ）的作用是什么？**  
   处理无法被正常消费的消息（如被拒绝、超时、队列满），通过配置 `x-dead-letter-exchange` 转发到 DLQ。

---

### **三、高可用与集群**
7. **RabbitMQ 集群如何实现高可用？**  
   - **镜像队列（Mirrored Queues）**：队列数据复制到多个节点。  
   - **节点类型**：  
     - **磁盘节点（Disc Node）**：存储元数据到磁盘。  
     - **内存节点（RAM Node）**：仅存储元数据在内存（性能高，需依赖磁盘节点）。

8. **如何解决集群网络分区问题？**  
   - 配置 `cluster_partition_handling` 策略，如 `pause_minority`（暂停少数节点）或自动恢复。

---

### **四、高级特性**
9. **延迟队列如何实现？**  
   - **死信队列 + TTL**：消息设置过期时间，过期后转入 DLQ。  
   - **插件（rabbitmq-delayed-message-exchange）**：直接支持延迟消息。

10. **如何保证消息顺序性？**  
    RabbitMQ 不严格保证顺序，但可通过单队列单消费者或业务逻辑（如版本号）实现顺序处理。

11. **什么是备用交换器（Alternate Exchange）？**  
    当消息无法路由到任何队列时，转发到备用交换器，避免消息丢失。

---

### **五、应用场景与对比**
12. **RabbitMQ 适用场景？**  
    - 异步任务（如邮件发送）。  
    - 应用解耦（微服务间通信）。  
    - 流量削峰（应对突发请求）。

13. **RabbitMQ 与 Kafka 的区别？**  
    - **RabbitMQ**：基于队列，适合实时性高、事务性消息。  
    - **Kafka**：基于日志分区，适合高吞吐、流数据处理。

---

### **六、问题排查与监控**
14. **消息堆积如何处理？**  
    - 增加消费者实例。  
    - 设置队列 TTL 或最大长度。  
    - 临时扩容处理能力。

15. **如何监控 RabbitMQ？**  
    - 内置管理插件（Web UI）。  
    - Prometheus + Grafana 监控指标（如队列长度、节点状态）。  
    - 日志分析（如 `rabbitmq.log`）。

---

### **七、进阶问题**
16. **事务 vs Confirm 机制？**  
    - **事务**：同步阻塞，性能差。  
    - **Confirm**：异步确认，性能高。

17. **如何保证消息安全性？**  
    - SSL/TLS 加密通信。  
    - 权限控制（用户、虚拟主机、读写权限）。

18. **什么是 Firehose 插件？**  
    用于消息追踪，可捕获所有经过交换器的消息（调试用，慎用生产环境）。

---

### **八、其他常见问题**
- **虚拟主机（vHost）的作用**：逻辑隔离，不同业务使用独立 vHost。  
- **消息优先级**：通过 `x-max-priority` 设置队列优先级。  
- **RPC 模式**：利用回调队列实现远程调用。

---

通过掌握以上知识点，能覆盖大部分 RabbitMQ 面试考点。建议结合实际配置和场景加深理解。