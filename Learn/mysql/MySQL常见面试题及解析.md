以下是MySQL常见的面试题及其解析，分为多个类别，帮助你系统化准备：

---

### **一、基础概念**
1. **MySQL的架构是怎样的？**  
   - 分为连接层（处理客户端连接）、服务层（解析、优化、执行SQL）、存储引擎层（InnoDB、MyISAM等）、物理存储层（数据文件、日志）。

2. **InnoDB和MyISAM的区别？**  
   - **事务**：InnoDB支持ACID事务，MyISAM不支持。  
   - **锁**：InnoDB支持行级锁，MyISAM只有表级锁。  
   - **外键**：InnoDB支持外键约束，MyISAM不支持。  
   - **崩溃恢复**：InnoDB有Redo Log保证数据安全，MyISAM依赖重建表。  
   - **索引结构**：两者均用B+树，但InnoDB的索引即数据文件（聚簇索引）。

3. **什么是ACID？**  
   - **原子性（Atomicity）**：事务全部成功或全部回滚。  
   - **一致性（Consistency）**：事务前后数据库状态合法。  
   - **隔离性（Isolation）**：事务间操作互不干扰。  
   - **持久性（Durability）**：事务提交后数据永久保存。

---

### **二、索引与查询优化**
1. **为什么使用B+树索引？**  
   - 相比B树，B+树非叶子节点不存数据，使得树更矮胖，减少I/O次数；叶子节点链表结构适合范围查询。

2. **什么是覆盖索引（Covering Index）？**  
   - 索引包含查询所需的所有字段，无需回表查询数据行，显著提升性能。

3. **最左前缀原则是什么？**  
   - 联合索引(a,b,c)，查询条件需从最左列开始（如a、a+b、a+b+c），否则索引失效。

4. **索引失效的常见场景？**  
   - 对索引列使用函数或运算（如`WHERE YEAR(date) = 2023`）。  
   - 类型隐式转换（如字符串字段用数字查询）。  
   - 使用`OR`条件且部分列无索引。  
   - `LIKE`以通配符开头（如`'%abc'`）。

5. **如何分析SQL性能？**  
   - 使用`EXPLAIN`查看执行计划，关注`type`（访问类型）、`key`（使用索引）、`rows`（扫描行数）、`Extra`（是否覆盖索引）。

---

### **三、事务与锁**
1. **事务隔离级别及问题**  
   - **读未提交**：脏读、不可重复读、幻读。  
   - **读已提交**：解决脏读。  
   - **可重复读（MySQL默认）**：解决不可重复读。  
   - **串行化**：解决所有问题，但性能差。

2. **MVCC（多版本并发控制）原理**  
   - 通过Undo Log保存数据历史版本，结合ReadView实现非锁定读，解决读写冲突。

3. **InnoDB的锁类型**  
   - **行锁**：锁定单行（Record Lock）。  
   - **间隙锁（Gap Lock）**：锁定范围，防止幻读。  
   - **Next-Key Lock**：行锁+间隙锁组合。

4. **如何避免死锁？**  
   - 按相同顺序访问资源，减小事务粒度，设置合理超时时间（`innodb_lock_wait_timeout`）。

---

### **四、主从复制与高可用**
1. **主从复制原理**  
   - 主库将变更写入Binlog，从库的IO线程拉取Binlog并写入Relay Log，SQL线程重放日志实现数据同步。

2. **主从延迟原因及解决**  
   - **原因**：网络延迟、从库负载高、大事务。  
   - **解决**：优化SQL，并行复制（MTS），使用半同步复制。

3. **分库分表方案**  
   - **垂直拆分**：按业务拆分表（如订单表、用户表）。  
   - **水平拆分**：按规则（Hash、Range）将数据分散到多个库/表。  
   - 中间件：ShardingSphere、MyCat。

---

### **五、SQL编写与优化**
1. **优化大表查询**  
   - 添加合适索引，避免`SELECT *`，分批处理数据，使用缓存（Redis）。

2. **深分页优化**  
   - 避免`LIMIT 100000,10`，改用ID过滤：`WHERE id > 100000 LIMIT 10`。

3. **Join和子查询如何选择？**  
   - Join通常效率更高（尤其关联字段有索引时），子查询可读性好但可能生成临时表。

---

### **六、其他高频问题**
1. **CHAR和VARCHAR的区别？**  
   - CHAR定长（空格填充），适合短且长度固定的字段；VARCHAR变长，节省空间。

2. **数据库三范式**  
   - 1NF：列不可再分；2NF：消除部分依赖；3NF：消除传递依赖。

3. **主键与唯一索引的区别？**  
   - 主键非空且唯一，一个表只能有一个；唯一索引可为空，可以有多个。

---

### **实战场景题示例**
- **场景**：某查询`SELECT * FROM orders WHERE user_id=123 ORDER BY create_time DESC LIMIT 10000,10` 执行缓慢，如何优化？  
  **答案**：  
  1. 为`(user_id, create_time)`添加联合索引。  
  2. 改用游标分页：`WHERE user_id=123 AND create_time < 'last_time' ORDER BY create_time DESC LIMIT 10`。

---

掌握以上内容后，建议结合具体项目经验，说明如何在实际中应用这些技术点。面试时清晰表达原理、问题分析及解决思路，会更具竞争力！